<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.55.6" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Network Concepts :: Always Learning; Always Improving</title>

    
    <link href="/css/nucleus.css?1573453257" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1573453257" rel="stylesheet">
    <link href="/css/hybrid.css?1573453257" rel="stylesheet">
    <link href="/css/featherlight.min.css?1573453257" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1573453257" rel="stylesheet">
    <link href="/css/auto-complete.css?1573453257" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1573453257" rel="stylesheet">
    <link href="/css/theme.css?1573453257" rel="stylesheet">
    <link href="/css/hugo-theme.css?1573453257" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1573453257"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/google-cloud-platform/network-concepts/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://learn.aayushtuladhar.com">
<div>Always Learning,</br>
  Always Improving</div>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1573453257"></script>
<script type="text/javascript" src="/js/auto-complete.js?1573453257"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/learn.aayushtuladhar.com";
    
</script>
<script type="text/javascript" src="/js/search.js?1573453257"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/devops/" title="DevOps" class="dd-item 
        
        
        
        ">
      <a href="/devops/">
          DevOps
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/devops/openshift/" title="OpenShift" class="dd-item ">
        <a href="/devops/openshift/">
        OpenShift
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/google-cloud-platform/" title="Google Cloud Platform" class="dd-item 
        parent
        
        
        ">
      <a href="/google-cloud-platform/">
          Google Cloud Platform
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/basic-essentials/" title="Basic Essentials" class="dd-item ">
        <a href="/google-cloud-platform/basic-essentials/">
        Basic Essentials
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/cloud-storage/" title="Cloud Storage" class="dd-item ">
        <a href="/google-cloud-platform/cloud-storage/">
        Cloud Storage
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/continuous-delivery-with-jenkins-in-kubernetes-engine/" title="Continuous Delivery with Jenkins in Kubernetes Engine" class="dd-item ">
        <a href="/google-cloud-platform/continuous-delivery-with-jenkins-in-kubernetes-engine/">
        Continuous Delivery with Jenkins in Kubernetes Engine
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/network-concepts/" title="Network Concepts" class="dd-item active">
        <a href="/google-cloud-platform/network-concepts/">
        Network Concepts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/orchestrating-cloud-with-kubernetes/" title="Orchestrating Cloud with Kubernetes" class="dd-item ">
        <a href="/google-cloud-platform/orchestrating-cloud-with-kubernetes/">
        Orchestrating Cloud with Kubernetes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/introduction-to-kubernetes/" title="Introduction to Kubernetes" class="dd-item 
        
        
        
        ">
      <a href="/introduction-to-kubernetes/">
          Introduction to Kubernetes
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/introduction-to-kubernetes/containers-and-orchestration/" title="Containers and Orchestration" class="dd-item 
        
        
        
        ">
      <a href="/introduction-to-kubernetes/containers-and-orchestration/">
          Containers and Orchestration
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/introduction-to-kubernetes/kubernetes/" title="Kubernetes" class="dd-item 
        
        
        
        ">
      <a href="/introduction-to-kubernetes/kubernetes/">
          Kubernetes
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/01_kubernetes-architecture/" title="01 - Kubernetes Architecture" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/01_kubernetes-architecture/">
        01 - Kubernetes Architecture
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/02_installing_kubernetes/" title="02 - Installing Kubernetes" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/02_installing_kubernetes/">
        02 - Installing Kubernetes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/03_minikube/" title="03 - Minikube" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/03_minikube/">
        03 - Minikube
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/04_kubernetes_building_blocks/" title="04 - Kubernetes Building Blocks" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/04_kubernetes_building_blocks/">
        04 - Kubernetes Building Blocks
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/05_authorization_access_control/" title="05 - Authentication, Authorization, and Admission Control" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/05_authorization_access_control/">
        05 - Authentication, Authorization, and Admission Control
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/javascript/" title="JavaScript" class="dd-item 
        
        
        
        ">
      <a href="/javascript/">
          JavaScript
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/javascript/es-6/arrowfunctions/" title="Arrow Functions" class="dd-item ">
        <a href="/javascript/es-6/arrowfunctions/">
        Arrow Functions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/javascript/es-6/destructuring/" title="Destructuring JavaScript Objects" class="dd-item ">
        <a href="/javascript/es-6/destructuring/">
        Destructuring JavaScript Objects
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/javascript/reactjs/redux/" title="Getting Started with Redux" class="dd-item ">
        <a href="/javascript/reactjs/redux/">
        Getting Started with Redux
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/javascript/template-literals/" title="Teplate Literals" class="dd-item ">
        <a href="/javascript/template-literals/">
        Teplate Literals
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/hugo-basics/" title="Using Hugo" class="dd-item 
        
        
        
        ">
      <a href="/hugo-basics/">
          Using Hugo
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/hugo-basics/basic_1/" title="Getting Started" class="dd-item ">
        <a href="/hugo-basics/basic_1/">
        Getting Started
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hugo-basics/basic_2/" title="Layouts" class="dd-item ">
        <a href="/hugo-basics/basic_2/">
        Layouts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Digital Learning Notebook</a> > <a href='/google-cloud-platform/'>Google Cloud Platform</a> > Network Concepts
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#projects">Projects</a></li>
<li><a href="#networks">Networks</a></li>
<li><a href="#subnetworks">Subnetworks</a></li>
<li><a href="#create-virtual-private-cloud-vpc-network-and-instances">Create Virtual Private Cloud (VPC) Network and Instances</a></li>
<li><a href="#firewall-rules">Firewall Rules</a></li>
<li><a href="#cloud-routes">Cloud Routes</a>
<ul>
<li><a href="#convert-to-a-nat-gateway">Convert to a NAT gateway</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Network Concepts
            </h1>
          

        





<h2 id="projects">Projects</h2>

<p>Projects are the outermost container and are used to group resources that share the same trust boundary. Many developers map Projects to teams since each Project has its own access policy (IAM) and member list. Projects also serve as a collector of billing and quota details reflecting resource consumption. Projects contain Networks which contain Subnetworks, Firewall rules, and Routes (see below architecture diagrams for illustration).</p>

<p><img src="/gcp-projects.png?pc=75" alt="GCP Projects" /></p>

<hr />

<h2 id="networks">Networks</h2>

<p>Networks directly connect your resources to each other and to the outside world. Networks, using Firewalls, also house the access policies for incoming and outgoing connections. Networks can be Global (offering horizontal scalability across multiple Regions) or Regional (offering low-latency within a single Region).</p>

<h2 id="subnetworks">Subnetworks</h2>

<p>Subnetworks allow you to group related resources (Compute Engine instances) into RFC1918 private address spaces. Subnetworks can only be Regional. A subnetwork can be in auto mode or custom mode.</p>

<p>An auto mode network has one subnet per region, each with a predetermined IP range and gateway. These subnets are created automatically when you create the auto mode network, and each subnet has the same name as the overall network.</p>

<p>A custom mode network has no subnets at creation. In order to create an instance in a custom mode network, you must first create a subnetwork in that region and specify its IP range. A custom mode network can have zero, one, or many subnets per region.</p>

<hr />

<h2 id="create-virtual-private-cloud-vpc-network-and-instances">Create Virtual Private Cloud (VPC) Network and Instances</h2>

<pre><code class="language-bash"># Creating VPC Network with auto subnet
gcloud compute networks create mynetwork --subnet-mode=auto

# Creating VPC Network with Custom Subnet
gcloud compute networks create privatenet --subnet-mode=custom

# Creating Custom Subnet - privatesubnet
gcloud compute networks subnets create privatesubnet --network=privatenet \
    --region=us-central1 --range=10.0.0.0/24 --enable-private-ip-google-access

</code></pre>

<pre><code class="language-bash">gcloud compute instances create default-us-vm --zone=us-central1-a --network=default

gcloud compute instances create mynet-us-vm --zone=us-central1-a --network=mynetwork

gcloud compute instances create mynet-eu-vm --zone=europe-west1-b --network=mynetwork

gcloud compute instances create privatenet-bastion --zone=us-central1-c \
    --subnet=privatesubnet --can-ip-forward

gcloud compute instances create privatenet-us-vm --zone=us-central1-f \
    --subnet=privatesubnet
</code></pre>


<div class="notices tip" ><p>When any Project is created, a single Network named default is created for you. The default Network has the following 2 firewall rules defined for network traffic:</p>
</div>


<p><code>default-deny-all-ingress</code> - Deny all incoming traffic</p>

<p><code>default-allow-all-egress</code> - Allow all outbound traffic</p>

<h2 id="firewall-rules">Firewall Rules</h2>


<div class="notices info" ><p>The privilege of creating, modifying, and deleting firewall rules is reserved for the <strong>compute.securityAdmin</strong> role by IAM.</p>
</div>


<pre><code class="language-bash">gcloud beta compute firewall-rules create mynetwork-allow-icmp --network mynetwork \
    --action ALLOW --direction INGRESS --rules icmp

gcloud beta compute firewall-rules create mynetwork-allow-ssh --network mynetwork \
    --action ALLOW --direction INGRESS --rules tcp:22

gcloud beta compute firewall-rules create mynetwork-allow-internal --network \
    mynetwork --action ALLOW --direction INGRESS --rules all \
    --source-ranges 10.128.0.0/9

gcloud beta compute firewall-rules list \
    --filter=&quot;network:mynetwork&quot;
</code></pre>

<h2 id="cloud-routes">Cloud Routes</h2>

<p>If you want traffic from specific instances to specific ranges to be routed in a specific way, you can use Google Cloud Routes to set up the destination for this traffic.</p>

<p>You can route traffic based on instance tags and destination range, and you can set the next hop to either:</p>

<ul>
<li>A specific instance (by instance name or IP)</li>
<li>A VPN Tunnel</li>
<li>The default internet gateway</li>
</ul>

<p>If multiple routes exist, the more specific route will be used. If there are multiple of those, the lowest priority value is used. Between Subnetworks, routes are automatically created implicitly at lowest priority value. Those routes cannot be changed or deleted.</p>

<h3 id="convert-to-a-nat-gateway">Convert to a NAT gateway</h3>

<pre><code class="language-bash"># Tag Instance
gcloud compute instances add-tags privatenet-us-vm --zone us-central1-f --tags nat-me

# Create NAT Route
gcloud compute routes create nat-route --network privatenet \
--destination-range 0.0.0.0/0 --next-hop-instance privatenet-bastion \
--next-hop-instance-zone us-central1-c --tags nat-me --priority 800
</code></pre>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/google-cloud-platform/continuous-delivery-with-jenkins-in-kubernetes-engine/" title="Continuous Delivery with Jenkins in Kubernetes Engine"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/google-cloud-platform/orchestrating-cloud-with-kubernetes/" title="Orchestrating Cloud with Kubernetes" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1573453257"></script>
    <script src="/js/perfect-scrollbar.min.js?1573453257"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1573453257"></script>
    <script src="/js/jquery.sticky.js?1573453257"></script>
    <script src="/js/featherlight.min.js?1573453257"></script>
    <script src="/js/html5shiv-printshiv.min.js?1573453257"></script>
    <script src="/js/highlight.pack.js?1573453257"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1573453257"></script>
    <script src="/js/learn.js?1573453257"></script>
    <script src="/js/hugo-learn.js?1573453257"></script>

    <link href="/mermaid/mermaid.css?1573453257" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1573453257"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

