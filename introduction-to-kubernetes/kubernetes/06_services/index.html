<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.55.6" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>06 - Services :: Always Learning; Always Improving</title>

    
    <link href="/css/nucleus.css?1573880110" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1573880110" rel="stylesheet">
    <link href="/css/hybrid.css?1573880110" rel="stylesheet">
    <link href="/css/featherlight.min.css?1573880110" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1573880110" rel="stylesheet">
    <link href="/css/auto-complete.css?1573880110" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1573880110" rel="stylesheet">
    <link href="/css/theme.css?1573880110" rel="stylesheet">
    <link href="/css/hugo-theme.css?1573880110" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1573880110"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/introduction-to-kubernetes/kubernetes/06_services/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://learn.aayushtuladhar.com">
<div>Always Learning,</br>
  Always Improving</div>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1573880110"></script>
<script type="text/javascript" src="/js/auto-complete.js?1573880110"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/learn.aayushtuladhar.com";
    
</script>
<script type="text/javascript" src="/js/search.js?1573880110"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/devops/" title="DevOps" class="dd-item 
        
        
        
        ">
      <a href="/devops/">
          DevOps
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/devops/openshift/" title="OpenShift" class="dd-item ">
        <a href="/devops/openshift/">
        OpenShift
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/google-cloud-platform/" title="Google Cloud Platform" class="dd-item 
        
        
        
        ">
      <a href="/google-cloud-platform/">
          Google Cloud Platform
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/basic-essentials/" title="Basic Essentials" class="dd-item ">
        <a href="/google-cloud-platform/basic-essentials/">
        Basic Essentials
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/cloud-storage/" title="Cloud Storage" class="dd-item ">
        <a href="/google-cloud-platform/cloud-storage/">
        Cloud Storage
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/continuous-delivery-with-jenkins-in-kubernetes-engine/" title="Continuous Delivery with Jenkins in Kubernetes Engine" class="dd-item ">
        <a href="/google-cloud-platform/continuous-delivery-with-jenkins-in-kubernetes-engine/">
        Continuous Delivery with Jenkins in Kubernetes Engine
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/network-concepts/" title="Network Concepts" class="dd-item ">
        <a href="/google-cloud-platform/network-concepts/">
        Network Concepts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-cloud-platform/orchestrating-cloud-with-kubernetes/" title="Orchestrating Cloud with Kubernetes" class="dd-item ">
        <a href="/google-cloud-platform/orchestrating-cloud-with-kubernetes/">
        Orchestrating Cloud with Kubernetes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/introduction-to-kubernetes/" title="Introduction to Kubernetes" class="dd-item 
        parent
        
        
        ">
      <a href="/introduction-to-kubernetes/">
          Introduction to Kubernetes
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/introduction-to-kubernetes/containers-and-orchestration/" title="Containers and Orchestration" class="dd-item 
        
        
        
        ">
      <a href="/introduction-to-kubernetes/containers-and-orchestration/">
          Containers and Orchestration
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/introduction-to-kubernetes/kubernetes/" title="Kubernetes" class="dd-item 
        parent
        
        
        ">
      <a href="/introduction-to-kubernetes/kubernetes/">
          Kubernetes
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/01_kubernetes-architecture/" title="01 - Kubernetes Architecture" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/01_kubernetes-architecture/">
        01 - Kubernetes Architecture
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/02_installing_kubernetes/" title="02 - Installing Kubernetes" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/02_installing_kubernetes/">
        02 - Installing Kubernetes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/03_minikube/" title="03 - Minikube" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/03_minikube/">
        03 - Minikube
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/04_kubernetes_building_blocks/" title="04 - Kubernetes Building Blocks" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/04_kubernetes_building_blocks/">
        04 - Kubernetes Building Blocks
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/05_authorization_access_control/" title="05 - Authentication, Authorization, and Admission Control" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/05_authorization_access_control/">
        05 - Authentication, Authorization, and Admission Control
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/06_services/" title="06 - Services" class="dd-item active">
        <a href="/introduction-to-kubernetes/kubernetes/06_services/">
        06 - Services
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction-to-kubernetes/kubernetes/07_deploying_standalone_app/" title="07 - Deploying Standalone App" class="dd-item ">
        <a href="/introduction-to-kubernetes/kubernetes/07_deploying_standalone_app/">
        07 - Deploying Standalone App
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/javascript/" title="JavaScript" class="dd-item 
        
        
        
        ">
      <a href="/javascript/">
          JavaScript
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/javascript/es-6/arrowfunctions/" title="Arrow Functions" class="dd-item ">
        <a href="/javascript/es-6/arrowfunctions/">
        Arrow Functions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/javascript/es-6/destructuring/" title="Destructuring JavaScript Objects" class="dd-item ">
        <a href="/javascript/es-6/destructuring/">
        Destructuring JavaScript Objects
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/javascript/reactjs/redux/" title="Getting Started with Redux" class="dd-item ">
        <a href="/javascript/reactjs/redux/">
        Getting Started with Redux
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/javascript/template-literals/" title="Teplate Literals" class="dd-item ">
        <a href="/javascript/template-literals/">
        Teplate Literals
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/hugo-basics/" title="Using Hugo" class="dd-item 
        
        
        
        ">
      <a href="/hugo-basics/">
          Using Hugo
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/hugo-basics/basic_1/" title="Getting Started" class="dd-item ">
        <a href="/hugo-basics/basic_1/">
        Getting Started
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hugo-basics/basic_2/" title="Layouts" class="dd-item ">
        <a href="/hugo-basics/basic_2/">
        Layouts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Digital Learning Notebook</a> > <a href='/introduction-to-kubernetes/'>Introduction to Kubernetes</a> > <a href='/introduction-to-kubernetes/kubernetes/'>Kubernetes</a> > 06 - Services
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#services">Services</a></li>
<li><a href="#service-object-example">Service Object Example</a>
<ul>
<li><a href="#kube-proxy">kube-proxy</a></li>
<li><a href="#service-discovery">Service Discovery</a></li>
<li><a href="#servie-type">Servie Type</a>
<ul>
<li><a href="#cluster-ip">Cluster IP</a></li>
<li><a href="#nodeport">NodePort</a></li>
</ul></li>
<li><a href="#loadbalancer">LoadBalancer</a></li>
<li><a href="#externalip">ExternalIP</a></li>
<li><a href="#externalname">ExternalName</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              06 - Services
            </h1>
          

        





<h2 id="services">Services</h2>

<blockquote>
<p>An abstract way to expose an application running on a set of Pods as a network service. With Kubernetes you donâ€™t need to modify your application to use an unfamiliar service discovery mechanism. Kubernetes gives Pods their own IP addresses and a single DNS name for a set of Pods, and can load-balance across them.</p>
</blockquote>

<p><img src="/introduction-to-kubernetes/services1.png?width=50pc" alt="Service" /></p>

<p>Using the selectors <code>app==frontend</code> and <code>app==db</code>, we group Pods into two logical sets: one with 3 Pods, and one with a single Pod.</p>

<p>We assign a name to the logical grouping, referred to as a Service. In our example, we create two Services, frontend-svc, and db-svc, and they have the <code>app==frontend</code> and the <code>app==db</code> Selectors, respectively.</p>

<p>Services can expose single Pods, ReplicaSets, Deployments, DaemonSets, and StatefulSets.</p>

<h2 id="service-object-example">Service Object Example</h2>

<pre><code class="language-yaml">kind: Service
apiVersion: v1
metadata:
  name: frontend-svc
spec:
  selector:
    app: frontend
  ports:
  - protocol: TCP
    port: 80
    targetPort: 5000
</code></pre>

<p>The user/client now connects to a Service via its ClusterIP, which forwards traffic to one of the Pods attached to it. A Service provides load balancing by default while selecting the Pods for traffic forwarding.</p>


<div class="notices tip" ><p>While the Service forwards traffic to Pods, we can select the targetPort on the Pod which receives the traffic. If the targetPort is not defined explicitly, then traffic will be forwarded to Pods on the port on which the Service receives traffic.</p>
</div>


<h3 id="kube-proxy">kube-proxy</h3>

<p>All worker nodes run a daemon called kube-proxy, which watches the API server on the master node for the addition and removal of Services and endpoints.</p>

<h3 id="service-discovery">Service Discovery</h3>

<p>As Services are the primary mode of communication in Kubernetes, we need a way to discover them at runtime. Kubernetes supports two methods for discovering Services:</p>

<ul>
<li>Environment Variables</li>
<li>DNS</li>
</ul>

<p>Kubernetes has an add-on for DNS, which creates a DNS record for each Service and its format is <code>my-svc.my-namespace.svc.cluster.local.</code></p>

<h3 id="servie-type">Servie Type</h3>

<p>While defining a Service, we can also choose its access scope. We can decide whether the Service:</p>

<ul>
<li>Is only accessible within the cluster</li>
<li>Is accessible from within the cluster and the external world</li>
<li>Maps to an entity which resides either inside or outside the cluster.</li>
</ul>


<div class="notices tip" ><p>Access scope is decided by ServiceType, which can be configured when creating the Service.</p>
</div>


<h4 id="cluster-ip">Cluster IP</h4>

<p>ClusterIP is the default ServiceType. A Service receives a Virtual IP address, known as its ClusterIP. This Virtual IP address is used for communicating with the Service and is accessible only within the cluster.</p>

<h4 id="nodeport">NodePort</h4>

<p>The NodePort ServiceType is useful when we want to make our Services accessible from the external world. The end-user connects to any worker node on the specified high-port, which proxies the request internally to the ClusterIP of the Service, then the request is forwarded to the applications running inside the cluster. To access multiple applications from the external world, administrators can configure a reverse proxy - an ingress, and define rules that target Services within the cluster.</p>

<h3 id="loadbalancer">LoadBalancer</h3>

<p>With the LoadBalancer ServiceType:</p>

<ul>
<li>NodePort and ClusterIP are automatically created, and the external load balancer will route to them</li>
<li>The Service is exposed at a static port on each worker node</li>
<li>The Service is exposed externally using the underlying cloud provider&rsquo;s load balancer feature.</li>
</ul>


<div class="notices info" ><p>The LoadBalancer ServiceType will only work if the underlying infrastructure supports the automatic creation of Load Balancers and have the respective support in Kubernetes, as is the case with the Google Cloud Platform and AWS. If no such feature is configured, the LoadBalancer IP address field is not populated, and the Service will work the same way as a NodePort type Service.</p>
</div>


<h3 id="externalip">ExternalIP</h3>

<p>A Service can be mapped to an ExternalIP address if it can route to one or more of the worker nodes. Traffic that is ingressed into the cluster with the ExternalIP (as destination IP) on the Service port, gets routed to one of the Service endpoints. This type of service requires an external cloud provider such as Google Cloud Platform or AWS.</p>

<h3 id="externalname">ExternalName</h3>

<p>ExternalName is a special ServiceType, that has no Selectors and does not define any endpoints. When accessed within the cluster, it returns a CNAME record of an externally configured Service.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/introduction-to-kubernetes/kubernetes/05_authorization_access_control/" title="05 - Authentication, Authorization, and Admission Control"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/introduction-to-kubernetes/kubernetes/07_deploying_standalone_app/" title="07 - Deploying Standalone App" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1573880110"></script>
    <script src="/js/perfect-scrollbar.min.js?1573880110"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1573880110"></script>
    <script src="/js/jquery.sticky.js?1573880110"></script>
    <script src="/js/featherlight.min.js?1573880110"></script>
    <script src="/js/html5shiv-printshiv.min.js?1573880110"></script>
    <script src="/js/highlight.pack.js?1573880110"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1573880110"></script>
    <script src="/js/learn.js?1573880110"></script>
    <script src="/js/hugo-learn.js?1573880110"></script>

    <link href="/mermaid/mermaid.css?1573880110" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1573880110"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

